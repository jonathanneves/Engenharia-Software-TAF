<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
               xmlns:p="http://primefaces.org/ui"
               xmlns:ui="http://java.sun.com/jsf/facelets"
               template="#{layoutMB.template}">
 
    <ui:define name="head-end">
        <ui:param name="renderBreadCrumb" value="false"/>
    </ui:define>
 
    <ui:define name="title">
        Cadastro de TAF
    </ui:define>
 
    <ui:define name="description">
        Agendando novo Teste de Aptidão Física no sistema
    </ui:define>
   
    <ui:define name="body">
        <f:metadata>
        </f:metadata>
   
          
    <div class="box box-primary">  
         <div class="box-header with-border">
   
            <h:form  id="frmTblExercicio">
                 <p:dataTable id="tblExercicio" var="e"  emptyMessage="Sem Registro" value="#{exercicioController.exercicios}"
                 reflow="true" rows="10" paginator="true"                                                                     
                 paginatorPosition="bottom"                                   
                 currentPageReportTemplate=""
                 rowsPerPageTemplate="5,10,15,20,30"
                 selection="#{tafController.exerciciosSelecionados}"
                 rowKey="#{e.id}">
                
                 <p:column selectionMode="multiple" style="width:10%;text-align:center"/>
                     
                     <p:column headerText="Id" style="width:10%;text-align:center;">
	                         <h:outputText value="#{e.id}" />
	                     </p:column>
	                  
	                     <p:column headerText="Nome">
	                         <h:outputText value="#{e.nome}" />
	                     </p:column>
	                     
	                     <p:column headerText="Modalidade">
	                          <p:selectManyButton >
	                 <f:selectItem itemLabel="1RM" itemValue="rm1" />
	                 <f:selectItem itemLabel="Rept. Máx." itemValue="max" />
	                 <f:selectItem itemLabel="Vol. de treino" itemValue="vol" />
	                 </p:selectManyButton>                  
                 </p:column>
                            

                 </p:dataTable> 
                
                 <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
                     <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                     <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
                 </p:confirmDialog>               
        </h:form>
               
                <h:form id="frmTblTAF">
               
                <h:panelGrid columns="2" id="cad" styleClass="my-panel-grid" style="width:100%">                               
                        <p:outputLabel for="txtTAF" value="TAF:" style="margin:5px"/>
                        <p:inputText id="txtTAF" required="true" style="margin:5px" value="#{tafController.taf.nome}" />   
                                                              
                        <p:outputLabel for="txtData" value="Data:" style="margin:5px"/>
                        <p:calendar id="txtData" pattern="dd/MM/yyyy" mask="99/99/9999"
                        required="true" navigator="true" style="margin:5px" value="#{tafController.taf.data}"/>   
                        
                        <p:commandButton value="Cadastrar TAF" style="float:left"
                            styleClass="btn-primary" icon="fa fa-plus" process="tblTAF" 
                            width="50%" actionListener="#{tafController.salvar}"/>                
                       
                </h:panelGrid>
               
                    <p:dataTable id="tblTAF" reflow="true" rows="5" paginator="true" var="taf" value="#{tafController.tafs}" > 
                                                          
                        <p:column headerText="TAF" >
                            <h:outputText value="#{taf.nome}" />
                        </p:column>
                       
                        <p:column headerText="Data" >
                            <h:outputText value="#{taf.data}" />
                        </p:column>            
                       
                    	<p:column headerText="Opções" exportable="false" style="width:auto;text-align:center">
	    					<p:commandButton icon="ui-icon-trash" actionListener="#{tafController.excluir}" update="frmCad:cad frmTbl:tbl">
	    						<p:confirm header="Confirmação" message="Você deseja Excluir este Taf?" icon="ui-icon-alert"/>
	    						<f:attribute name="tafExclui" value="#{taf}"/>		    		
	    					</p:commandButton>
	  		 			</p:column>
						    					 
                    </p:dataTable>
                    	<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
							<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
							<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
						</p:confirmDialog>
                </h:form>
           
            </div>
        </div>
       
    </ui:define>
</ui:composition>