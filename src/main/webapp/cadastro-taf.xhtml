<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
               xmlns:p="http://primefaces.org/ui"
               xmlns:ui="http://java.sun.com/jsf/facelets"
               template="#{layoutMB.template}">
 
    <ui:define name="head-end">
        <ui:param name="renderBreadCrumb" value="false"/>
    </ui:define>
 
    <ui:define name="title">
        Cadastro de TAF
    </ui:define>
 
    <ui:define name="description">
        Agendando novo Teste de Aptidão Física no sistema
    </ui:define>
   
    <ui:define name="body">
        <f:metadata>
        </f:metadata>
   
          
    <div class="box box-primary">  
         <div class="box-header with-border">
   
      	<h:form id="frmCadTAF" enctype="multipart/form-data">
               
              <h:panelGrid columns="5" id="cad" styleClass="my-panel-grid" style="width:100%">   
                                          
                  <p:outputLabel for="txtTAF" value="TAF:" style="margin:5px"/>
                  <p:inputText id="txtTAF" required="true"
					requiredMessage="Nome TAF Obrigatório" value="#{tafController.taf.nome}" />   
                                                        
                  <p:outputLabel for="txtData" value="Data de Realização:" style="margin:5px"/>
                  <p:calendar id="txtData" pattern="dd/MM/yyyy" mask="99/99/9999"
                  required="true" navigator="true"
                  requiredMessage="Data de Realização Obrigatório" value="#{tafController.taf.data}"/>  
                  
              </h:panelGrid> 
              
                <br/>
                
             	<p:outputLabel value="Selecione os exercícios e suas respectivas modalidades na tabela para cadastrar:"/>            	
                  
                 <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                     <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                     <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
                 </p:confirmDialog>          

          		<br/>
				<br/>
				
                <p:dataTable id="tblExercicio" var="e"  emptyMessage="Sem Registro" value="#{exercicioController.exercicios}"
                reflow="true" rows="10" paginator="true"                                                                     
                paginatorPosition="bottom"                                   
                currentPageReportTemplate=""
                rowsPerPageTemplate="5,10,15,20,30"
                selection="#{tafController.exercicios}"
                rowKey="#{e.id}">
               
                 <p:column selectionMode="multiple" style="width:10%;text-align:center"/>
                     
                     	<p:column headerText="Id" style="width:10%;text-align:center;">
	                         <h:outputText value="#{e.id}" />
	                     </p:column>
	                  
	                     <p:column headerText="Nome">
	                         <h:outputText value="#{e.nome}" />
	                     </p:column>
	                    
	       		         <p:column headerText="Modalidade" width="50%" style="text-align:center;padding:5px;">
	                        <p:selectManyButton value="#{e.modalidades}">
	                		  	<f:selectItem itemLabel="1RM" itemValue="rm" />
	                 			<f:selectItem itemLabel="Rept. Máx." itemValue="max" />
	                 			<f:selectItem itemLabel="Vol. de treino" itemValue="vt" />
			                </p:selectManyButton>              
		                </p:column>   				                
		                                 
		             <f:facet name="footer">
		                <p:commandButton value="Cadastrar" actionListener="#{tafController.salvar}" 
				         update="frmCadTAF:multiExercicio frmCadTAF:cad"
				         icon="fa fa-plus" style="padding:5px; margin:5px" styleClass="btn-primary"/>         	     	
		       		 </f:facet> 	               			        		        
                </p:dataTable> 
                 
		      <ui:repeat id="multiExercicio" value="#{tafController.exercicios}" var="e"/>
	
        	</h:form>
             
            </div>
        </div>
       
    </ui:define>
</ui:composition>